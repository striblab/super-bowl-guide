<div class="component component-index">
  <nav class="minor-navigation items-2 minor-nav-lists">
    <h1>{{ data.title }}</h1>
  </nav>

  <div class="groups cf">
    {{#each data.groups as g}}
      <div class="group">
        <a href="{{ data.basePath }}/{{ g.filename }}"><span>{{ g.title }}</span></a>
      </div>
    {{/each}}
  </div>

  <div class="social-buttons">
    <a href="{{ facebookURL }}" target="_blank" rel="noopener" class="facebook-button"></a>
    <a href="{{ tweetURL }}" target="_blank" rel="noopener" class="twitter-button"></a>
    <a href="{{ emailURL }}" target="_blank" rel="noopener" class="email-button"></a>
  </div>
</div>

<script>
export default {
  oncreate() {
    this.observe('data', n => {
      if (n && n.groups && n.groups.length) {
        n.groups = n.groups.sort((a, b) => {
          return b.order - a.order;
        });

        this.set('data', n);
      }
    });
  },

  computed: {
    facebookURL: function(data, content) {
      return `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(
        data.baseURL
      )}`;
    },

    tweetURL: function(data, content) {
      return `https://twitter.com/intent/tweet?text=${encodeURIComponent(
        content.twitterShare
      )}&url=${encodeURIComponent(data.baseURL)}&via=${encodeURIComponent(
        content.twitterAccount
      )}`;
    },

    emailURL: function(data, content) {
      return `mailto:RECIPIENT?subject=${encodeURIComponent(
        content.emailShare
      )}&body=${encodeURIComponent(data.baseURL)}`;
    }
  },

  data() {
    return {
      isBrowser: typeof window !== undefined
    };
  }
};
</script>
